<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –ö–∏—Ä–∏–ª–ª!</title>
<style>
html,body {
  margin:0; padding:0; height:100%;
  background:#030914;
  overflow:hidden;
  color:white;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing: antialiased;
}
.start-screen, .main-content {
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  transition:opacity 1s ease;
}
.start-screen {
  background:radial-gradient(circle at 50% 30%, #101a2f, #030914 70%);
  z-index:10;
}
.start-btn {
  font-size:20px; padding:14px 30px;
  border:none; border-radius:30px;
  background:linear-gradient(135deg,#ffd166,#ef476f);
  color:#000; font-weight:600;
  cursor:pointer; box-shadow:0 0 20px rgba(255,209,102,0.4);
  transition:transform 0.2s,box-shadow 0.3s;
}
.start-btn:hover { transform:scale(1.05); box-shadow:0 0 25px rgba(239,71,111,0.7); }
.main-content {
  opacity:0; pointer-events:none;
}
.lyrics {
  position:relative;
  overflow:hidden;
  height:60%;
  width:80%;
  text-align:center;
  font-size:22px;
  line-height:1.8;
  color:rgba(255,255,255,0.6);
  margin-top:5%;
}
.line {
  opacity:0.2;
  transform:translateY(40px);
  transition:all 1.2s ease;
}
.line.active {
  opacity:1;
  color:#ffd166;
  text-shadow:0 0 25px rgba(255,209,102,0.5), 0 0 40px rgba(239,71,111,0.3);
  transform:translateY(0);
  animation:pulse 3s ease-in-out infinite;
}
@keyframes pulse {
  0%, 100% {
    text-shadow: 0 0 25px rgba(255,209,102,0.3);
    color: #ffd166;
  }
  25% {
    text-shadow: 0 0 40px rgba(239,71,111,0.6);
    color: #ef476f;
  }
  50% {
    text-shadow: 0 0 55px rgba(255,255,255,0.8);
    color: #ffe3a3;
  }
  75% {
    text-shadow: 0 0 40px rgba(6,214,160,0.6);
    color: #ffd166;
  }
}
canvas {
  position:absolute; inset:0; pointer-events:none; z-index:1;
}
#stars { z-index:0; }
.wrapper {
  position:relative; z-index:5;
  width:100%; height:100%;
  display:flex; align-items:center; justify-content:center;
  flex-direction:column;
}
audio { display:none; }
.flash {
  position:fixed; inset:0; background:white; opacity:0;
  pointer-events:none; transition:opacity 0.6s ease-out; z-index:15;
}
.flash.active { opacity:1; transition:opacity 0.3s ease-in; }
</style>
</head>
<body>

<!-- –í—Å–ø—ã—à–∫–∞ -->
<div class="flash" id="flash"></div>

<!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
<div class="start-screen" id="startScreen">
  <button class="start-btn" id="startBtn">–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ üéß</button>
</div>

<!-- –ó–≤—ë–∑–¥—ã -->
<canvas id="stars"></canvas>

<!-- –§–µ–π–µ—Ä–≤–µ—Ä–∫–∏ -->
<canvas id="fireworks"></canvas>

<!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
<div class="main-content" id="mainContent">
  <div class="wrapper">
    <div class="lyrics" id="lyrics">
      <div class="line">–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –ö–∏—Ä–∏–ª–ª!</div>
      <div class="line">–°–µ–≥–æ–¥–Ω—è –º—É–∑—ã–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–±–µ.</div>
      <div class="line">–ö–∞–∂–¥–∞—è –Ω–æ—Ç–∞ ‚Äî —Ç–≤–æ—è –º—ã—Å–ª—å,</div>
      <div class="line">–∫–∞–∂–¥—ã–π —Ä–∏—Ç–º ‚Äî —Ç–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è.</div>
      <div class="line">–ñ–∏–≤–∏ –≥—Ä–æ–º–∫–æ, –º–µ—á—Ç–∞–π —Å–º–µ–ª–æ,</div>
      <div class="line">–∏ –ø—É—Å—Ç—å –º–∏—Ä –ø–æ–¥–ø–µ–≤–∞–µ—Ç —Ç–µ–±–µ.</div>
      <div class="line">–¢—ã ‚Äî —Ç—Ä–µ–∫, —á—Ç–æ –∑–≤—É—á–∏—Ç —Ç–æ–ª—å–∫–æ –≤–≤–µ—Ä—Ö.</div>
      <div class="line">–° –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º, –±—Ä–∞—Ç!</div>
    </div>
  </div>
</div>

<audio id="music" loop>
  <source src="smokedope_foamposite_interlude.mp3.m4a" type="audio/mp4">
</audio>

<script>
// === –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã ===
const startBtn=document.getElementById('startBtn');
const startScreen=document.getElementById('startScreen');
const mainContent=document.getElementById('mainContent');
const flash=document.getElementById('flash');
const music=document.getElementById('music');
const lines=document.querySelectorAll('.line');

// === –†–∞–∑–º–µ—Ä—ã ===
const canvas=document.getElementById('fireworks');
const ctx=canvas.getContext('2d');
let cw,ch;
function resize(){cw=canvas.width=innerWidth;ch=canvas.height=innerHeight;}
addEventListener('resize',resize);resize();

// === –ó–≤—ë–∑–¥—ã ===
const starsCanvas=document.getElementById('stars');
const sctx=starsCanvas.getContext('2d');
function resizeStars(){starsCanvas.width=innerWidth;starsCanvas.height=innerHeight;}
addEventListener('resize',resizeStars);resizeStars();

let stars=[];
for(let i=0;i<250;i++){
  stars.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,size:Math.random()*1.5+0.5,twinkle:Math.random()*100});
}
function drawStars(){
  sctx.clearRect(0,0,starsCanvas.width,starsCanvas.height);
  for(let s of stars){
    s.twinkle+=0.05;
    let alpha=0.5+Math.sin(s.twinkle)*0.5;
    sctx.fillStyle=`rgba(255,255,255,${alpha})`;
    sctx.fillRect(s.x,s.y,s.size,s.size);
  }
  requestAnimationFrame(drawStars);
}
drawStars();

// === –§–µ–π–µ—Ä–≤–µ—Ä–∫–∏ ===
class Particle{
  constructor(x,y,vx,vy,hue,life,size){this.x=x;this.y=y;this.vx=vx;this.vy=vy;this.hue=hue;this.life=life;this.size=size;this.alpha=1;}
  update(dt){this.vy+=0.02*dt;this.x+=this.vx*dt;this.y+=this.vy*dt;this.alpha-=0.02*dt;this.life-=dt;}
  draw(){ctx.beginPath();ctx.globalCompositeOperation='lighter';
    const g=ctx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size*4);
    g.addColorStop(0,`hsla(${this.hue},100%,65%,${Math.max(this.alpha,0)})`);
    g.addColorStop(0.4,`hsla(${this.hue},100%,55%,${Math.max(this.alpha-0.15,0)})`);
    g.addColorStop(1,`hsla(${this.hue},60%,30%,0)`);
    ctx.fillStyle=g;ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fill();}
}

let particles=[];let last=performance.now();
function loop(now){
  const dt=Math.min((now-last)/16,4);last=now;
  ctx.clearRect(0,0,cw,ch);
  ctx.fillStyle='rgba(5,8,15,0.15)';
  ctx.fillRect(0,0,cw,ch);
  for(let i=particles.length-1;i>=0;i--){
    const p=particles[i];p.update(dt);
    if(p.life<=0||p.alpha<=0){particles.splice(i,1);continue;}
    p.draw();
  }
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

function burst(x,y){
  const hue=Math.floor(Math.random()*360);
  for(let i=0;i<Math.floor(Math.random()*40+60);i++){
    const ang=Math.random()*Math.PI*2;
    const spd=Math.random()*5+1.5;
    particles.push(new Particle(x,y,Math.cos(ang)*spd,Math.sin(ang)*spd,hue,Math.random()*50+40,Math.random()*3+1));
  }
}
let fireworksStarted=false;
function autoFire(){
  if(!fireworksStarted) return;
  burst(Math.random()*cw*0.8+cw*0.1,Math.random()*ch*0.5+ch*0.1);
  setTimeout(autoFire,Math.random()*800+800);
}

// === –õ–∏—Ä–∏–∫—Å-–∞–Ω–∏–º–∞—Ü–∏—è ===
function animateLyrics() {
  let i = 0;
  function nextLine() {
    if (i > 0) lines[i-1].classList.remove('active');
    if (i < lines.length) {
      lines[i].classList.add('active');
      lines[i].scrollIntoView({behavior: "smooth", block: "center"});
      i++;
      setTimeout(nextLine, 4000); // —Å–∫–æ—Ä–æ—Å—Ç—å —Å–º–µ–Ω—ã —Å—Ç—Ä–æ–∫
    }
  }
  nextLine();
}

// === –ü—É—Å–∫ ===
startBtn.addEventListener('click',()=>{
  flash.classList.add('active');
  setTimeout(()=>flash.classList.remove('active'),300);
  startScreen.style.opacity='0';
  setTimeout(()=>startScreen.style.display='none',1000);
  mainContent.style.opacity='1';
  mainContent.style.pointerEvents='auto';
  try{music.play();}catch(e){console.log(e);}

  fireworksStarted=true;
  autoFire();
  animateLyrics();
});
</script>

</body>
</html>